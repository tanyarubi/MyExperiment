<!DOCTYPE html>
<html>
    <head>
        <title>My experiment</title>
		<script src="jspsych-6.3.1/jspsych.js"></script>
		<script src="jspsych-6.3.1/plugins/jspsych-html-keyboard-response.js"></script>
	        <script src="jspsych-6.3.1/plugins/jspsych-instructions.js"></script>
		<script src="jspsych-6.3.1/plugins/jspsych-html-slider-response.js"></script>
		<script src="jspsych-6.3.1/plugins/jspsych-image-keyboard-response.js"></script>
		<script src="jspsych-6.3.1/plugins/jspsych-preload.js"></script>
		<script src="jspychophysics/jspsych-psychophysics.js"></script>
		<link href="jspsych-6.3.1/css/jspsych.css" rel="stylesheet" type="text/css">
		
		
    </head>
    <body></body>
	

	
	
	<script>
	//flow paramaters */ 
	var Npractice = 1;
	var Ntrials = 42;
	var show_RT = 500; //milisec
	
	//pardigm parameters
	var sigma = 20;
	var sampleSize = 8;
	var max_n = 100
	var min_n = 0
	var c = 30 //constant that bounds the scale for the samples' mean
	
	let ranNum = [];
	let ranNumStr = [];
	let backToArr = [];
	/* create timeline */
    var timeline = [];

	// generate a random subject ID with 15 characters
	var subject_id = jsPsych.randomization.randomID(4);
	
	// pick a random condition for the subject at the start of the experiment
	var condition_assignment = jsPsych.randomization.sampleWithoutReplacement(['conditionIndifFirst', 'conditionGroupFirst'], 1)[0];

	// record the condition assignment in the jsPsych data
	// this adds a property called 'subject' and a property called 'condition' to every trial
	jsPsych.data.addProperties({
	  subject: subject_id,
	  condition: condition_assignment
	});

    /* define welcome message trial */
    var welcome = {
      type: "html-keyboard-response",
      stimulus: "Welcome to the experiment. Press any key to begin."
    };
    timeline.push(welcome);

    /* define instructions trials */
    var instructions = {
      type: "html-keyboard-response",
      stimulus: `
        <p>Thank you for taking part in our study!</p>
		<p>In this study we will ask you to help us evaluate peopleâ€™s average level of physical activity.</p>
		<p>To do this, we had volunteers wear a fitness watch, which kept track of the number of minutes they engaged 
		in aerobic physical activity (walking, jogging, dancing, intense house work) on a particular day. </p>

        
        <p>Press any key to begin.</p>
       `,
      post_trial_gap: 2000
    };
	timeline.push(instructions);
	
	

    var instruct_indiv_first = {
      type: "html-keyboard-response",
      stimulus: `
        <p>We will show you data from the fitness watch of <b>one individual</b>, who wore it for eight consecutive days.
		<p>We will then ask you to evaluate the average of that individual.  
        <p>Press any key to begin.</p>
       `,
      post_trial_gap: 2000
    };
	
	var instruct_indiv_second = {
      type: "html-keyboard-response",
      stimulus: `
        <p>We will now show you data from the fitness watch of <b>one individual</b>, who wore it for eight consecutive days.
		<p>We will then ask you to evaluate the average of that individual.

        <p>Press any key to begin.</p>
       `,
      post_trial_gap: 2000
    };
	
	var instruct_group_first = {
      type: "html-keyboard-response",
      stimulus: `
        <p>We will show you data from fitness watches of <b>eight different people</b>.
		<p>We will then ask you to evaluate the average of that <b>group of people</b>.
        <p>Press any key to begin.</p>
       `,
      post_trial_gap: 2000
    };
	
	var instruct_group_second = {
      type: "instructions",
       pages: [
        'We will now show you data from fitness watches of <b>eight different people',
	       'We will then ask you to evaluate the average of that <b>group of people',
        'Press any key to begin'
       ],
      show_clickable_nav: true
}
	

var ranNumAr = [...Array(8)].map(e=>~~(Math.random()*101));
let textRanNum = ranNumAr.map(String)
		
	var fixation = {
      type: 'html-keyboard-response',
      stimulus: '<div style="font-size:60px;">+</div>',
      choices: jsPsych.NO_KEYS,
      trial_duration: 1000,
    }
	//create trial function

	
	

	var text_object1 = {
        obj_type: 'text',
        content: textRanNum[0],
        font: "22px 'Arial'",
        text_color: 'black',
        endX: 'center',
        endY: 'center',
        show_start_time: 500, // ms after the start of the trial
		show_end_time: 1000
    }

		var text_object2 = {
        obj_type: 'text',
        content: textRanNum[1],
        font: "22px 'Arial'",
        text_color: 'black',
        endX: 'center',
        endY: 'center',
        show_start_time: 1000, // ms after the start of the trial
		show_end_time: 1500
    }
		
		var text_object3 = {
        obj_type: 'text',
        content: textRanNum[2],
        font: "22px 'Arial'",
        text_color: 'black',
        endX: 'center',
        endY: 'center',
        show_start_time: 1500, // ms after the start of the trial
		show_end_time: 2000
    }
		
		var text_object4 = {
        obj_type: 'text',
        content: textRanNum[3],
        font: "22px 'Arial'",
        text_color: 'black',
        endX: 'center',
        endY: 'center',
        show_start_time: 2000, // ms after the start of the trial
		show_end_time: 2500
    }
		var text_object5 = {
        obj_type: 'text',
        content: textRanNum[4],
        font: "22px 'Arial'",
        text_color: 'black',
        endX: 'center',
        endY: 'center',
        show_start_time: 2500, // ms after the start of the trial
		show_end_time: 3000
    }
		
		var text_object6 = {
        obj_type: 'text',
        content: textRanNum[5],
        font: "22px 'Arial'",
        text_color: 'black',
        endX: 'center',
        endY: 'center',
        show_start_time: 3000, // ms after the start of the trial
		show_end_time: 3500
    }
		
		var text_object7 = {
        obj_type: 'text',
        content: textRanNum[6],
        font: "22px 'Arial'",
        text_color: 'black',
        endX: 'center',
        endY: 'center',
        show_start_time: 3500, // ms after the start of the trial
		show_end_time: 4000
    }
		
		var text_object8 = {
        obj_type: 'text',
        content: textRanNum[7],
        font: "22px 'Arial'",
        text_color: 'black',
        endX: 'center',
        endY: 'center',
        show_start_time: 4000, // ms after the start of the trial
		show_end_time: 4500
    }



	var slider_group = {
    type: 'html-slider-response',
	stimulus: [],
    labels: ['0','100'],
    prompt: `<p>What was this group's activity level?</p>`,
    data: {num1: text_object1, num2: text_object2, num3: text_object3, num4: text_object4, num5: text_object5, num6: text_object6, num7: text_object7, num8: text_object8}
	}

	var slider_indiv = {
    type: 'html-slider-response',
	stimulus: [],
    labels: ['0','100'],
    prompt: `<p>What was this person's activity level?</p>`,
    data: {num1: text_object1, num2: text_object2, num3: text_object3, num4: text_object4, num5: text_object5, num6: text_object6, num7: text_object7, num8: text_object8}
	}
	
	var data = jsPsych.data.get().filter({trial_type: 'html-slider-response'});
	
	var node = {
    timeline: [instruct_indiv_first, fixation, slider_indiv,instruct_group_second,slider_group],
    repetitions: 3
	}

	/* start the experiment */
    jsPsych.init({
      timeline: [node],
	  on_finish: function() {
        jsPsych.data.displayData('csv');
		jsPsych.data.get().localSave('csv','mydata.csv');
    }
    });

	
    </script>
</html>
